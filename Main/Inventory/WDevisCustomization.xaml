<Window x:Class="GestionComerce.Main.Inventory.WDevisCustomization"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Personnalisation du Devis" 
        Height="750" Width="1000"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#F8FAFC">

    <Window.Resources>
        <SolidColorBrush x:Key="PrimaryBlue" Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentCyan" Color="#06B6D4"/>
        <SolidColorBrush x:Key="SuccessGreen" Color="#10B981"/>
        <SolidColorBrush x:Key="SurfaceWhite" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="BorderLight" Color="#E2E8F0"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#0F172A"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#64748B"/>

        <DropShadowEffect x:Key="ShadowMd" BlurRadius="20" ShadowDepth="0" Color="#000000" Opacity="0.06"/>

        <Style x:Key="SectionBorder" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource SurfaceWhite}"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>

        <Style x:Key="CheckBoxStyle" TargetType="CheckBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,14"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SurfaceWhite}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="Padding" Value="24,14"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="24"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="24"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="Personnalisation du Devis" 
                       FontSize="28" 
                       FontWeight="Bold"
                       Foreground="{StaticResource TextPrimary}"/>
            <TextBlock Text="Sélectionnez les informations à afficher sur le devis" 
                       FontSize="14"
                       Foreground="{StaticResource TextSecondary}"
                       Margin="0,8,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="24"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column -->
                <StackPanel Grid.Column="0">
                    <!-- Company Information Section -->
                    <Border Style="{StaticResource SectionBorder}">
                        <StackPanel>
                            <TextBlock Text="📋 Informations de l'Entreprise" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,16"/>

                            <CheckBox x:Name="ShowLogoCheckBox" 
                                      Content="Logo de l'entreprise" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowCompanyNameCheckBox" 
                                      Content="Nom de l'entreprise" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowICECheckBox" 
                                      Content="ICE" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowVATCheckBox" 
                                      Content="VAT/TVA" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowCompanyIdCheckBox" 
                                      Content="ID de l'entreprise" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowEtatJuridicCheckBox" 
                                      Content="État Juridique" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowSiegeCheckBox" 
                                      Content="Siège de l'entreprise" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowTelephoneCheckBox" 
                                      Content="Téléphone" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowAdresseCheckBox" 
                                      Content="Adresse" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Article Fields Section -->
                    <Border Style="{StaticResource SectionBorder}">
                        <StackPanel>
                            <TextBlock Text="📦 Colonnes des Articles" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,16"/>

                            <CheckBox x:Name="ShowCodeCheckBox" 
                                      Content="Code Article" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowArticleNameCheckBox" 
                                      Content="Nom de l'article" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowQuantityCheckBox" 
                                      Content="Quantité" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowUnitPriceCheckBox" 
                                      Content="Prix Unitaire" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowTotalPriceCheckBox" 
                                      Content="Prix Total" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowTVACheckBox" 
                                      Content="TVA %" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowFamilleCheckBox" 
                                      Content="Famille/Catégorie" 
                                      IsChecked="False"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowFournisseurCheckBox" 
                                      Content="Fournisseur" 
                                      IsChecked="False"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowMarqueCheckBox" 
                                      Content="Marque" 
                                      IsChecked="False"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowLotCheckBox" 
                                      Content="Numéro de Lot" 
                                      IsChecked="False"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowBonLivraisonCheckBox" 
                                      Content="Bon de Livraison" 
                                      IsChecked="False"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowExpirationCheckBox" 
                                      Content="Date d'Expiration" 
                                      IsChecked="False"
                                      Style="{StaticResource CheckBoxStyle}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right Column -->
                <StackPanel Grid.Column="2">
                    <!-- Devis Information Section -->
                    <Border Style="{StaticResource SectionBorder}">
                        <StackPanel>
                            <TextBlock Text="📄 Informations du Devis" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,16"/>

                            <CheckBox x:Name="ShowDevisNumberCheckBox" 
                                      Content="Numéro de Devis" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowDevisDateCheckBox" 
                                      Content="Date du Devis" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowValidityCheckBox" 
                                      Content="Validité du Devis" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>

                            <TextBlock Text="Validité (jours):" 
                                       FontSize="13"
                                       Foreground="{StaticResource TextSecondary}"
                                       Margin="24,8,0,4"/>
                            <TextBox x:Name="ValidityDaysTextBox"
                                     Text="30"
                                     Width="100"
                                     Height="36"
                                     Padding="8"
                                     FontSize="14"
                                     HorizontalAlignment="Left"
                                     Margin="24,0,0,12"/>
                        </StackPanel>
                    </Border>

                    <!-- Client Information Section -->
                    <Border Style="{StaticResource SectionBorder}">
                        <StackPanel>
                            <TextBlock Text="👤 Informations Client" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,16"/>

                            <CheckBox x:Name="ShowClientSectionCheckBox" 
                                      Content="Afficher section client" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"
                                      Checked="ClientSection_CheckChanged"
                                      Unchecked="ClientSection_CheckChanged"/>

                            <StackPanel x:Name="ClientFieldsPanel" Margin="24,0,0,0">
                                <TextBlock Text="Nom du client:" 
                                           FontSize="13"
                                           Foreground="{StaticResource TextSecondary}"
                                           Margin="0,0,0,4"/>
                                <TextBox x:Name="ClientNameTextBox"
                                         Text=""
                                         Height="36"
                                         Padding="8"
                                         FontSize="14"
                                         Margin="0,0,0,12"/>

                                <TextBlock Text="ICE Client:" 
                                           FontSize="13"
                                           Foreground="{StaticResource TextSecondary}"
                                           Margin="0,0,0,4"/>
                                <TextBox x:Name="ClientICETextBox"
                                         Text=""
                                         Height="36"
                                         Padding="8"
                                         FontSize="14"
                                         Margin="0,0,0,12"/>

                                <TextBlock Text="Adresse Client:" 
                                           FontSize="13"
                                           Foreground="{StaticResource TextSecondary}"
                                           Margin="0,0,0,4"/>
                                <TextBox x:Name="ClientAddressTextBox"
                                         Text=""
                                         Height="36"
                                         Padding="8"
                                         FontSize="14"
                                         Margin="0,0,0,12"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Totals Section -->
                    <Border Style="{StaticResource SectionBorder}">
                        <StackPanel>
                            <TextBlock Text="💰 Totaux" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,16"/>

                            <CheckBox x:Name="ShowSubtotalCheckBox" 
                                      Content="Sous-total (HT)" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowTVATotalCheckBox" 
                                      Content="Total TVA" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                            <CheckBox x:Name="ShowGrandTotalCheckBox" 
                                      Content="Total TTC" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Additional Options -->
                    <Border Style="{StaticResource SectionBorder}">
                        <StackPanel>
                            <TextBlock Text="⚙️ Options Additionnelles" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,16"/>

                            <CheckBox x:Name="ShowNotesCheckBox" 
                                      Content="Section Notes/Remarques" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"
                                      Checked="NotesSection_CheckChanged"
                                      Unchecked="NotesSection_CheckChanged"/>

                            <TextBox x:Name="NotesTextBox"
                                     Text="Merci de votre confiance."
                                     Height="80"
                                     Padding="8"
                                     FontSize="13"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     VerticalScrollBarVisibility="Auto"
                                     Margin="24,0,0,12"/>

                            <CheckBox x:Name="ShowPaymentTermsCheckBox" 
                                      Content="Conditions de paiement" 
                                      IsChecked="True"
                                      Style="{StaticResource CheckBoxStyle}"
                                      Checked="PaymentTerms_CheckChanged"
                                      Unchecked="PaymentTerms_CheckChanged"/>

                            <TextBox x:Name="PaymentTermsTextBox"
                                     Text="Paiement à 30 jours"
                                     Height="36"
                                     Padding="8"
                                     FontSize="13"
                                     Margin="24,0,0,0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Actions -->
        <StackPanel Grid.Row="4" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right">
            <Button Content="← Retour"
                    Width="140" Height="48"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Click="Back_Click"
                    Margin="0,0,12,0"/>
            <Button x:Name="GenerateButton"
                    Content="Générer le Devis ✓"
                    Width="200" Height="48"
                    Style="{StaticResource PrimaryButtonStyle}"
                    Click="Generate_Click">
                <Button.Background>
                    <SolidColorBrush Color="#10B981"/>
                </Button.Background>
            </Button>
        </StackPanel>
    </Grid>
</Window>