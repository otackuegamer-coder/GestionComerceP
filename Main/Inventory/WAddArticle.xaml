<Window x:Class="GestionComerce.Main.Inventory.WAddArticle"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ajouter un Article"
        Width="1100" Height="700"
        ResizeMode="NoResize"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Elite Color Palette -->
        <SolidColorBrush x:Key="PrimaryDark" Color="#1E293B"/>
        <SolidColorBrush x:Key="PrimaryBlue" Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentCyan" Color="#06B6D4"/>
        <SolidColorBrush x:Key="AccentPurple" Color="#8B5CF6"/>
        <SolidColorBrush x:Key="SuccessGreen" Color="#10B981"/>
        <SolidColorBrush x:Key="WarningOrange" Color="#F59E0B"/>
        <SolidColorBrush x:Key="DangerRed" Color="#EF4444"/>
        <SolidColorBrush x:Key="BackgroundLight" Color="#F8FAFC"/>
        <SolidColorBrush x:Key="SurfaceWhite" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="BorderLight" Color="#E2E8F0"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#0F172A"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#64748B"/>
        <SolidColorBrush x:Key="TextTertiary" Color="#94A3B8"/>

        <!-- Premium Shadows -->
        <DropShadowEffect x:Key="ShadowXl" BlurRadius="48" ShadowDepth="0" Color="#000000" Opacity="0.12"/>
        <DropShadowEffect x:Key="ShadowLg" BlurRadius="32" ShadowDepth="0" Color="#000000" Opacity="0.08"/>

        <!-- Header Title Style -->
        <Style x:Key="HeaderTitleStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="28"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>

        <!-- Section Title Style -->
        <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>

        <!-- Label Style -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <!-- Modern TextBox Style -->
        <!-- Modern TextBox Style - FIXED -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Padding" Value="14,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="10">
                            <Grid>
                                <ScrollViewer x:Name="PART_ContentHost" 
                                      Focusable="False"
                                      HorizontalScrollBarVisibility="Hidden"
                                      VerticalScrollBarVisibility="Hidden"
                                      Padding="{TemplateBinding Padding}"
                                      VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#3B82F6"/>
                                <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#CBD5E1"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Required TextBox Style -->
        <Style x:Key="RequiredTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource ModernTextBoxStyle}">
            <Style.Triggers>
                <Trigger Property="Text" Value="">
                    <Setter Property="BorderBrush" Value="#EF4444"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Modern DatePicker Style -->
        <Style x:Key="ModernDatePickerStyle" TargetType="DatePicker">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Padding" Value="14,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="{StaticResource SurfaceWhite}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>

        <!-- Modern ComboBox Style -->
        <Style x:Key="ModernComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Padding" Value="14,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="{StaticResource SurfaceWhite}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>

        <!-- Icon Button Style -->
        <Style x:Key="IconButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SuccessGreen}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#059669"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#047857"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Close Button Style -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FEE2E2"/>
                                <Setter Property="Foreground" Value="{StaticResource DangerRed}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,14"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="52"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2563EB"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1E40AF"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Success Button Style -->
        <Style x:Key="SuccessButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource SuccessGreen}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#059669"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#047857"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Danger Button Style -->
        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource DangerRed}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#DC2626"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#B91C1C"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Purple Button Style -->
        <Style x:Key="PurpleButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource AccentPurple}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#7C3AED"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#6D28D9"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border Padding="0" Margin="20"
            Background="{StaticResource SurfaceWhite}" 
            CornerRadius="16"
            Effect="{StaticResource ShadowXl}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <Border Grid.Row="0" 
                    Background="{StaticResource BackgroundLight}"
                    CornerRadius="16,16,0,0"
                    BorderBrush="{StaticResource BorderLight}"
                    BorderThickness="0,0,0,1">
                <Grid Margin="32,24">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Rectangle Width="4" Height="32" 
                                   Fill="{StaticResource PrimaryBlue}" 
                                   RadiusX="2" RadiusY="2"
                                   Margin="0,0,16,0"/>
                        <TextBlock x:Name="HeaderText"
                                   Text="Ajouter un nouvel article"
                                   Style="{StaticResource HeaderTitleStyle}"/>
                    </StackPanel>

                    <Button Name="CloseButton"
                            Style="{StaticResource CloseButtonStyle}"
                            Content="✕"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Click="CloseButton_Click"/>
                </Grid>
            </Border>

            <!-- Content Section -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="32,24">
                <StackPanel>
                    <!-- Essential Information Section -->
                    <TextBlock Text="Informations Essentielles" 
                               Style="{StaticResource SectionTitleStyle}"/>

                    <Grid Margin="0,0,0,32">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="24"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="24"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Column 1 -->
                        <StackPanel Grid.Column="0">
                            <!-- Supplier -->
                            <TextBlock Text="Fournisseur *" Style="{StaticResource LabelStyle}"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="44"/>
                                </Grid.ColumnDefinitions>
                                <ComboBox Name="FournisseurList"
                                          Grid.Column="0"
                                          Style="{StaticResource ModernComboBoxStyle}"
                                          Margin="0"/>
                                <Button Grid.Column="2" 
                                        Name="AjouterFournisseur"
                                        Content="+"
                                        Style="{StaticResource IconButtonStyle}"
                                        Click="AddSupplierButton_Click"/>
                            </Grid>

                            <!-- Code -->
                            <TextBlock Text="Code Article *" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="Code" 
                                     MaxLength="18"
                                     Style="{StaticResource RequiredTextBoxStyle}"
                                     PreviewTextInput="IntegerTextBox_PreviewTextInput"
                                     DataObject.Pasting="IntegerTextBox_Pasting"/>

                            <!-- Article Name -->
                            <TextBlock Text="Nom de l'article *" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="ArticleName" 
                                     Style="{StaticResource RequiredTextBoxStyle}"
                                     MaxLength="100"/>

                            <!-- Family -->
                            <TextBlock Text="Famille *" Style="{StaticResource LabelStyle}"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="44"/>
                                </Grid.ColumnDefinitions>
                                <ComboBox Name="FamilliesList"
                                          Grid.Column="0"
                                          Style="{StaticResource ModernComboBoxStyle}"
                                          Margin="0"/>
                                <Button Grid.Column="2" 
                                        Name="AjouterFamille"
                                        Content="+"
                                        Style="{StaticResource IconButtonStyle}"
                                        Click="AddFamillyButton_Click"/>
                            </Grid>
                        </StackPanel>

                        <!-- Column 2 -->
                        <StackPanel Grid.Column="2">
                            <!-- Marque -->
                            <TextBlock Text="Marque" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="Marque" 
                                     Style="{StaticResource ModernTextBoxStyle}"
                                     MaxLength="100"/>

                            <!-- Date -->
                            <TextBlock Text="Date" Style="{StaticResource LabelStyle}"/>
                            <DatePicker x:Name="DateArticle" 
                                        Style="{StaticResource ModernDatePickerStyle}"/>

                            <!-- Numero Lot -->
                            <TextBlock Text="Numéro de Lot" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="NumeroLot" 
                                     Style="{StaticResource ModernTextBoxStyle}"
                                     MaxLength="50"/>

                            <!-- Bon Livraison -->
                            <TextBlock Text="Bon de Livraison" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="BonLivraison" 
                                     Style="{StaticResource ModernTextBoxStyle}"
                                     MaxLength="50"/>
                        </StackPanel>

                        <!-- Column 3 -->
                        <StackPanel Grid.Column="4">
                            <!-- Date Livraison -->
                            <TextBlock Text="Date de Livraison" Style="{StaticResource LabelStyle}"/>
                            <DatePicker x:Name="DateLivraison" 
                                        Style="{StaticResource ModernDatePickerStyle}"/>

                            <!-- Date Expiration -->
                            <TextBlock Text="Date d'Expiration" Style="{StaticResource LabelStyle}"/>
                            <DatePicker x:Name="DateExpiration" 
                                        Style="{StaticResource ModernDatePickerStyle}"/>
                            <!-- Add this in Column 3 after DateExpiration -->
                            <TextBlock Text="Image de l'article" Style="{StaticResource LabelStyle}"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="44"/>
                                </Grid.ColumnDefinitions>
                                <Border Grid.Column="0" 
            x:Name="ImagePreviewBorder"
            Height="120"
            BorderBrush="{StaticResource BorderLight}"
            BorderThickness="1"
            CornerRadius="10"
            Background="#F8FAFC">
                                    <Image x:Name="ArticleImagePreview" 
               Stretch="Uniform"
               Margin="4"/>
                                </Border>
                                <Button Grid.Column="2" 
            Name="SelectImageButton"
            Content="📁"
            Style="{StaticResource IconButtonStyle}"
            Click="SelectImageButton_Click"
            VerticalAlignment="Top"/>
                            </Grid>
                        </StackPanel>
                    </Grid>

                    <!-- Pricing & Stock Section -->
                    <TextBlock Text="Prix et Stock" 
                               Style="{StaticResource SectionTitleStyle}"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="24"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="24"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Column 1 -->
                        <StackPanel Grid.Column="0">
                            <!-- Purchase Price -->
                            <TextBlock Text="Prix d'achat (DH) *" Style="{StaticResource LabelStyle}"/>
                            <TextBox Name="PrixA" 
                                     Style="{StaticResource RequiredTextBoxStyle}" 
                                     Text="0.00" 
                                     PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                     MaxLength="18" 
                                     DataObject.Pasting="DecimalTextBox_Pasting"/>

                            <!-- Initial Stock -->
                            <TextBlock Text="Quantité initiale *" Style="{StaticResource LabelStyle}"/>
                            <TextBox Name="Quantite" 
                                     Style="{StaticResource RequiredTextBoxStyle}" 
                                     Text="0" 
                                     PreviewTextInput="IntegerTextBox_PreviewTextInput" 
                                     MaxLength="10" 
                                     DataObject.Pasting="IntegerTextBox_Pasting"/>

                            <!-- Unlimited Stock Checkbox -->
                        </StackPanel>

                        <!-- Column 2 -->
                        <StackPanel Grid.Column="2">
                            <!-- Sale Price -->
                            <TextBlock Text="Prix de vente (DH) *" Style="{StaticResource LabelStyle}"/>
                            <TextBox Name="PrixV" 
                                     Style="{StaticResource RequiredTextBoxStyle}" 
                                     PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                     MaxLength="18" 
                                     Text="0.00" 
                                     DataObject.Pasting="DecimalTextBox_Pasting"/>

                            <!-- TVA -->
                            <TextBlock Text="TVA (%)" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="TVA" 
                                     Style="{StaticResource ModernTextBoxStyle}"
                                     Text="0.00"
                                     PreviewTextInput="DecimalTextBox_PreviewTextInput"
                                     MaxLength="5"
                                     DataObject.Pasting="DecimalTextBox_Pasting"/>
                        </StackPanel>

                        <!-- Column 3 -->
                        <StackPanel Grid.Column="4">
                            <!-- MP Price -->
                            <TextBlock Text="Prix MP (DH) *" Style="{StaticResource LabelStyle}"/>
                            <TextBox Name="PrixMP" 
                                     Style="{StaticResource RequiredTextBoxStyle}" 
                                     Text="0.00" 
                                     PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                     MaxLength="18" 
                                     DataObject.Pasting="DecimalTextBox_Pasting"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer Section -->
            <!-- Footer Section - FIXED STRUCTURE -->
            <Border Grid.Row="2" 
        Background="{StaticResource BackgroundLight}"
        CornerRadius="0,0,16,16"
        BorderBrush="{StaticResource BorderLight}"
        BorderThickness="0,1,0,0"
        Padding="32,24">

                <!-- Container for all footer content -->
                <Grid>
                    <!-- Payment Buttons Container (for add mode with payment options) -->
                    <StackPanel x:Name="ButtonsContainer">
                        <!-- Payment Method Selection -->
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="180"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Méthode de Paiement:" 
                           Grid.Column="0"
                           VerticalAlignment="Center"
                           Style="{StaticResource LabelStyle}"
                           Margin="0"/>

                            <ComboBox x:Name="PaymentMethodComboBox"
                          Grid.Column="2"
                          Style="{StaticResource ModernComboBoxStyle}"
                          Margin="0"
                          SelectedIndex="0"/>
                        </Grid>

                        <!-- Payment Action Buttons -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="12"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="12"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button x:Name="CashButton" 
                        Grid.Column="0" 
                        Style="{StaticResource PrimaryButtonStyle}" 
                        Click="CashButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M3 6h18v12H3V6zm2 2v8h14V8H5z" 
                              Fill="White" 
                              Stretch="Uniform" 
                              Width="18" Height="18" 
                              Margin="0,0,8,0"/>
                                    <TextBlock Text="CASH" 
                                   FontSize="13" 
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="HalfButton" 
                        Grid.Column="2" 
                        Style="{StaticResource DangerButtonStyle}" 
                        Click="HalfButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M4 4h16v16H4V4zm8 0v16" 
                              Fill="White" 
                              Stroke="White"
                              StrokeThickness="2"
                              Stretch="Uniform" 
                              Width="18" Height="18" 
                              Margin="0,0,8,0"/>
                                    <TextBlock Text="50/50" 
                                   FontSize="13" 
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="CreditButton" 
                        Grid.Column="4" 
                        Style="{StaticResource SuccessButtonStyle}" 
                        Click="CreditButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M2 6c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v2H2V6zm0 4h20v8c0 1.1-.9 2-2 2H4a2 2 0 0 1-2-2v-8z" 
                              Fill="White" 
                              Stretch="Uniform" 
                              Width="18" Height="18" 
                              Margin="0,0,8,0"/>
                                    <TextBlock Text="CREDIT" 
                                   FontSize="13" 
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </StackPanel>

                    <!-- Single Action Buttons (MOVED OUTSIDE ButtonsContainer) -->
                    <Button x:Name="EnregistrerButton" 
                Content="Enregistrer" 
                Style="{StaticResource PrimaryButtonStyle}"
                Click="EnregistrerButton_Click" 
                Visibility="Collapsed"/>

                    <Button x:Name="AjouterButton" 
                Content="Ajouter" 
                Style="{StaticResource SuccessButtonStyle}"
                Click="AjouterButton_Click" 
                Visibility="Collapsed"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
